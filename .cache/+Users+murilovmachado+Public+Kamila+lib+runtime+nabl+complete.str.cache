Module("runtime/nabl/complete",[Imports([Import("runtime/nabl/collect"),Import("runtime/nabl/uri"),Import("runtime/task/core")]),Signature([Constructors([OpDecl("COMPLETION",FunType([ConstType(SortNoArgs("String"))],ConstType(SortNoArgs("COMPLETION"))))])]),Rules([RDefNoArgs("nabl-propose-completions",Rule(Var("ast"),Var(ListVar("proposal*")),[WithClause(LChoice(Seq(Assign(Var(ListVar("completion*")),App(Seq(Call(SVar("collect-one"),[Match(NoAnnoList(Op("COMPLETION",[Wld])))]),CallNoArgs(SVar("nabl-collect-all-completion"))),Var("ast"))),Seq(Assign(Var(ListVar("def*")),App(Call(SVar("mapconcat"),[Seq(LRule(RuleNoCond(NoAnnoList(Op("Completion",[Var("result")])),Var("result"))),CallNoArgs(SVar("task-get-solved")))]),Var(ListVar("completion*")))),Assign(Var(ListVar("proposal*")),App(Call(SVar("map"),[Seq(CallNoArgs(SVar("nabl-uri")),CallNoArgs(SVar("nabl-uri-name")))]),Var(ListVar("def*")))))),Assign(Var(ListVar("proposal*")),NoAnnoList(List([])))))]))])])