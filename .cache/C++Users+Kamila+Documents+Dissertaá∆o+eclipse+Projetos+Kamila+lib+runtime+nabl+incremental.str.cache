Module("nbl/incremental",[Imports([Import("runtime/nabl/uri"),Import("runtime/nabl/interface"),Import("runtime/task/core")]),Rules([RDefT("nabl-add-uri-read",[],[DefaultVarDec("task-id")],Rule(Var("uri"),Var("uri"),[WithClause(BA(Seq(Call(SVar("try"),[CallT(SVar("nabl-replace-uri-qualifier"),[],[NoAnnoList(Tuple([]))])]),CallT(SVar("task-add-read"),[],[Var("task-id")])),Var("uri")))])),RDefT("nabl-add-ns-read",[],[DefaultVarDec("task-id"),DefaultVarDec("namespace")],Rule(Var("uri"),Var("uri"),[WithClause(BA(CallT(SVar("task-add-read"),[],[Var("task-id")]),NoAnnoList(Tuple([Var("uri"),Var("namespace")]))))])),RDefT("nabl-add-name-read",[],[DefaultVarDec("task-id"),DefaultVarDec("namespace"),DefaultVarDec("name")],Rule(Var("uri"),Var("uri"),[WithClause(BA(Seq(CallT(SVar("nabl-extend-uri"),[],[Var("namespace"),Var("name"),NoAnnoList(Tuple([]))]),CallT(SVar("task-add-read"),[],[Var("task-id")])),Var("uri")))]))]),Rules([RDefNoArgs("nabl-get-changed-reads",Rule(Var(ListVar("changed-entry*")),NoAnnoList(List([Var(ListVar("uri-read*")),Var(ListVar("ns-read*"))])),[WithClause(Seq(Assign(Var(ListVar("uri*")),App(Call(SVar("filter"),[Seq(CallNoArgs(SVar("nabl-diff-entry")),CallNoArgs(SVar("nabl-uri")))]),Var(ListVar("changed-entry*")))),Seq(Assign(Var(ListVar("uri-read*")),App(Call(SVar("map"),[Call(SVar("try"),[CallT(SVar("nabl-replace-uri-qualifier"),[],[NoAnnoList(Tuple([]))])])]),Var(ListVar("uri*")))),Assign(Var(ListVar("ns-read*")),App(Call(SVar("filter"),[CallNoArgs(SVar("nabl-create-ns-read"))]),Var(ListVar("uri*")))))))])),RDefNoArgs("nabl-create-ns-read",Rule(Var("uri"),NoAnnoList(Tuple([Var("uri'"),Var("ns")])),Seq(Assign(Var("ns"),App(CallNoArgs(SVar("nabl-uri-namespace")),Var("uri"))),Assign(Var("uri'"),App(CallNoArgs(SVar("nabl-uri-parent")),Var("uri"))))))])])